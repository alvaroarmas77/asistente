parse_appointment_request:
  description: >
    Analyze the following natural language appointment request: "{appointment_request}".
    The request is made by {Nombre} {apellido}.
    Extract: Name, last name, Email, WhatsApp number, date, duration, and purpose.
    Handle relative time references (like "tomorrow") and convert them to specific ISO dates.
  expected_output: >
    A structured JSON format containing: date, start_time, end_time, duration, 
    attendees (names/emails), subject, and notes.
  agent: appointment_request_parser

check_availability_and_create_calendar_event:
  description: >
    Using the parsed details, check availability and use the tool to create an 
    Outlook event. If conflicts exist, suggest alternatives.
  expected_output: >
    Confirmation of the calendar event creation with the Event ID or a conflict report.
  agent: calendar_manager
  context:
    - parse_appointment_request

send_email_confirmation:
  description: >
    Draft a professional confirmation email using the calendar event details. 
    Ensure all attendees are included.
  expected_output: >
    The full content of the confirmation email and a list of recipients.
  agent: email_confirmation_specialist
  context:
    - check_availability_and_create_calendar_event

schedule_whatsapp_reminders:
  description: >
    Use the tool to send an immediate confirmation via WhatsApp and prepare 
    the text for the 24h/1h reminders.
  expected_output: >
    Confirmation of the WhatsApp message sent status and the content of the reminders.
  agent: whatsapp_reminder_specialist
  context:
    - check_availability_and_create_calendar_event

complete_appointment_setup:
  description: >
    Consolidate all previous task outputs into a final, standardized JSON summary.
  expected_output: >
    A standardized JSON object containing the appointment_summary with status, 
    calendar_event details, email_confirmation status, and whatsapp_reminders info.
  agent: summary_specialist
  context:
    - send_email_confirmation
    - schedule_whatsapp_reminders